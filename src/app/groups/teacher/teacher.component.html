<div [ngClass]="{
  'translate-x-5': isExpanded && !isMobile,
  '-translate-x-15': !isExpanded && !isMobile
}" class="ml-55">

  <!-- ÿßŸÑÿπŸÜŸàÿßŸÜ ŸàÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 max-w-5xl mx-auto w-full mb-10 mt-5">
    <h1 class="text-2xl font-semibold text-gray-800">Student Groups</h1>
    <div class="flex space-x-2 ml-27">
      <!-- ÿ≠ŸÇŸÑ ÿßŸÑÿ®ÿ≠ÿ´ -->
      <div class="relative">
        <input [(ngModel)]="searchTerm" type="text" placeholder="Search with name"
          class="border rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none">
        <span class="absolute left-3 top-2 text-gray-400">üîç</span>
      </div>

      <!-- ÿ≤ÿ± ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ¨ŸÖŸàÿπÿ© -->
      <div class="relative">
        <button (click)="toggleAddGroup()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700">
          + Add Group
        </button>

        <!-- ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© -->
        <div *ngIf="showAddGroupBox" class="absolute mt-2 right-0 bg-white border rounded-lg shadow-lg p-4 w-64 z-50">
          <h3 class="text-sm font-semibold mb-2 text-gray-700">Create New Group</h3>
          <input [(ngModel)]="groupName" type="text" placeholder="Group Name"
            class="border rounded-lg px-3 py-2 mb-3 w-full text-sm focus:outline-none focus:ring">
          <div class="flex justify-end space-x-2">
            <button (click)="toggleAddGroup()" class="text-gray-500 text-sm hover:text-gray-700">Cancel</button>
            <button (click)="createGroup()" class="bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700">Create</button>
          </div>
        </div>
      </div>

      <!-- ÿ≤ÿ± ÿßŸÑÿ™ÿµÿØŸäÿ± -->
      <button class="border border-gray-300 text-gray-600 px-4 py-2 rounded-lg text-sm hover:bg-gray-100">Export</button>
    </div>
  </div>

  <!-- ÿßŸÑÿ¨ÿ±Ÿàÿ®ÿßÿ™ -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 max-w-5xl mx-auto w-full">
    <!-- ÿ®ÿ∑ÿßŸÇÿ© ŸÖÿ¨ŸÖŸàÿπÿ© -->
    <div *ngFor="let group of filteredGroups" class="bg-white rounded-lg shadow-md p-4 flex flex-row space-x-6 min-w-[400px]">
      <div class="flex-1 min-w-[250px]">
        <h2 class="text-lg font-semibold text-gray-800">{{ group.name }}</h2>
        <div class="text-sm text-gray-500 mt-2">
          <span>1 teacher , </span><span>{{ group.members.length }} Students</span>
        </div>
        <div class="mt-2">
          <label class="block text-xs text-gray-500 mb-1">Group Code:</label>
          <div class="relative w-full max-w-[150px]">
            <div class="bg-gray-100 rounded px-4 py-2 text-sm font-mono break-all w-full pr-10">
              {{ group.shortCode }}
            </div>
            <button (click)="copyCode(group.shortCode)" class="absolute top-1/2 right-2 -translate-y-1/2 text-green-800">
              <img src="../../assets/images/Copy.png" alt="Copy icon" class="w-5 h-5 object-contain" />
            </button>
          </div>
        </div>
      </div>

      <!-- ÿßŸÑŸÖÿπŸÑŸÖŸàŸÜ ŸàÿßŸÑÿ∑ŸÑÿßÿ® -->
      <div class="flex-none w-1/3 flex flex-row items-center justify-between">
        <!-- ÿßŸÑŸÖÿπŸÑŸÖ -->
        <div>
          <h3 class="text-xs text-gray-500 mb-2">Teacher</h3>
          <div class="flex">
            <div *ngIf="group.teacher" class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
              <img *ngIf="group.teacher.avatarUrl" [src]="group.teacher.avatarUrl" class="w-8 h-8 rounded-full" />
              <span *ngIf="!group.teacher.avatarUrl">{{ group.teacher.name[0] }}</span>
            </div>
          </div>
        </div>

        <!-- ÿßŸÑÿ∑ŸÑÿßÿ® ÿßŸÑŸÖŸÖŸäÿ≤ŸàŸÜ -->
        <div>
          <h3 class="text-xs text-gray-500 mb-2 mt-[-6px]">Top Students</h3>
          <div class="flex">
            <ng-container *ngIf="group.members && group.members.length > 0; else noStudent">
              <div *ngFor="let member of group.members.slice(0, 2)" class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-semibold overflow-hidden">
                <ng-container *ngIf="member.memberAvatarUrl; else noAvatar">
                  <img [src]="member.memberAvatarUrl" class="w-8 h-8 rounded-full object-cover" />
                </ng-container>
                <ng-template #noAvatar>{{ member.memberName[0] }}</ng-template>
              </div>
              <span *ngIf="group.members.length > 2" class="text-gray-400">...</span>
            </ng-container>
            <ng-template #noStudent>
              <span class="text-gray-400 italic">No student</span>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
